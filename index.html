<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Aktörskarta Jämtland-Härjedalen & Trøndelag</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
  <style>
    #map { height: 90vh; width: 100%; }
    #controls { margin: 10px; }
    select { padding:5px; margin-right:10px; }
  </style>
</head>
<body>

<h2>Aktörskarta Jämtland-Härjedalen & Trøndelag</h2>
<div id="controls">
  Kategori:
  <select id="categoryFilter">
    <option value="all">Alla</option>
  </select>
  Ort:
  <select id="cityFilter">
    <option value="all">Alla</option>
  </select>
</div>
<div id="map"></div>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>
// Skapa kartan
var map = L.map('map').setView([63.5, 13.5], 6);
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);

// Färg per kategori
var colors = {
  "Näringsliv":"blue",
  "Offentliga aktörer":"red",
  "Universitet/forskning":"green",
  "Kultur":"orange",
  "Sport":"purple",
  "Finansiering":"brown",
  "Nätverk":"pink",
  "Gränsöverskridande":"teal",
  "Event":"cyan",
  "Företag":"gray"
};

// Aktörer med ort och kategori (ungefärliga lat/lon)
var actors = [
  // Näringslivsorganisationer - Jämtland Härjedalen
  {name:"Samling Näringsliv", city:"Östersund", category:"Näringsliv", lat:63.179, lon:14.635},
  {name:"IUC Jämtland Härjedalen", city:"Östersund", category:"Näringsliv", lat:63.179, lon:14.635},
  {name:"Handelskammaren Mitt", city:"Östersund", category:"Näringsliv", lat:63.179, lon:14.635},
  {name:"Företagarna", city:"Östersund", category:"Näringsliv", lat:63.179, lon:14.635},
  {name:"Jämtland Härjedalen Turism (JHT)", city:"Östersund", category:"Näringsliv", lat:63.179, lon:14.635},
  {name:"Svenskt Näringsliv Jämtland", city:"Östersund", category:"Näringsliv", lat:63.179, lon:14.635},
  {name:"Nyföretagarcentrum", city:"Östersund", category:"Näringsliv", lat:63.179, lon:14.635},
  {name:"Lantbrukarnas riksorganisation (LRF)", city:"Östersund", category:"Näringsliv", lat:63.179, lon:14.635},
  {name:"Peak Inkubator", city:"Östersund", category:"Näringsliv", lat:63.179, lon:14.635},

  // Näringslivsorganisationer - Trøndelag
  {name:"NHO Næringslivets Hovedorganisasjon", city:"Trondheim", category:"Näringsliv", lat:63.4305, lon:10.3951},
  {name:"Næringsforeningen i Trondheimsregionen (NiT)", city:"Trondheim", category:"Näringsliv", lat:63.4305, lon:10.3951},
  {name:"Innherred Næringsforening", city:"Steinkjer", category:"Näringsliv", lat:64.017, lon:11.500},
  {name:"Rørosregionen Næringshage", city:"Røros", category:"Näringsliv", lat:62.574, lon:11.384},
  {name:"Nasjonalparken Næringshage", city:"Røros", category:"Näringsliv", lat:62.574, lon:11.384},
  {name:"FI Næringshage", city:"Steinkjer", category:"Näringsliv", lat:64.017, lon:11.500},
  {name:"Tindved Kulturhage", city:"Steinkjer", category:"Näringsliv", lat:64.017, lon:11.500},
  {name:"Næringshagen Hitra og Frøya", city:"Hitra", category:"Näringsliv", lat:63.528, lon:9.377},
  {name:"Blått Kompetansesenter AS", city:"Trondheim", category:"Näringsliv", lat:63.4305, lon:10.3951},

  // Offentliga aktörer - Trøndelag
  {name:"Statsforvalteren", city:"Trondheim", category:"Offentliga aktörer", lat:63.4305, lon:10.3951},
  {name:"Helse Midt-Norge RHF", city:"Steinkjer", category:"Offentliga aktörer", lat:64.017, lon:11.500},
  {name:"Statens vägvesende", city:"Trondheim", category:"Offentliga aktörer", lat:63.4305, lon:10.3951},

  // Offentliga aktörer - Jämtland Härjedalen
  {name:"Länsstyrelsen", city:"Östersund", category:"Offentliga aktörer", lat:63.176, lon:14.635},
  {name:"Arbetsförmedlingen", city:"Östersund", category:"Offentliga aktörer", lat:63.176, lon:14.635},

  // Universitet/forskning - JH
  {name:"Mittuniversitetet (MIUN)", city:"Östersund", category:"Universitet/forskning", lat:63.179, lon:14.635},

  // Kultur - Trøndelag
  {name:"Trøndelag Teater", city:"Trondheim", category:"Kultur", lat:63.429, lon:10.392},

  // Sport - JH
  {name:"Storsjöcupen", city:"Östersund", category:"Sport", lat:63.179, lon:14.635}

  // Lägg till resten av alla aktörer på samma sätt
];

// Skapa markers
var markers = [];
actors.forEach(function(a){
  var marker = L.circleMarker([a.lat, a.lon], {
    radius:6,
    color: colors[a.category] || "black",
    fillOpacity:0.8
  }).bindPopup(a.name + " ("+a.city+")").addTo(map);
  marker.actor = a;
  markers.push(marker);
});

// Fyll dropdowns
var categories = Array.from(new Set(actors.map(a=>a.category)));
var categorySelect = document.getElementById("categoryFilter");
categories.forEach(c=>{
  var opt = document.createElement("option"); opt.value=c; opt.textContent=c;
  categorySelect.appendChild(opt);
});

var cities = Array.from(new Set(actors.map(a=>a.city)));
var citySelect = document.getElementById("cityFilter");
cities.forEach(c=>{
  var opt = document.createElement("option"); opt.value=c; opt.textContent=c;
  citySelect.appendChild(opt);
});

// Filterfunktion
function updateMarkers(){
  var cat = categorySelect.value;
  var city = citySelect.value;
  markers.forEach(m=>{
    var show = (cat==="all" || m.actor.category===cat) && (city==="all" || m.actor.city===city);
    m.setStyle({opacity: show?1:0, fillOpacity: show?0.8:0});
    if(show) m.bringToFront();
  });
}
categorySelect.addEventListener("change", updateMarkers);
citySelect.addEventListener("change", updateMarkers);
</script>

</body>
</html>
