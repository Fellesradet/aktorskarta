<!DOCTYPE html>
<html lang="sv">
<head>
<meta charset="UTF-8">
<title>Aktörskarta</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
<style>
body { margin:0; display:flex; height:100vh; font-family: Arial, sans-serif; }
#sidebar { width: 300px; overflow-y: auto; padding: 10px; border-right: 1px solid #ccc; }
#map { flex:1; }
.org-item { padding:5px; cursor:pointer; border-bottom:1px solid #eee; }
.org-item:hover { background:#f0f0f0; }
select { width: 100%; margin-bottom: 10px; padding: 5px; }
</style>
</head>
<body>


<div id="sidebar">
<h3>Organisationer</h3>
<label for="kategori-filter">Välj kategori:</label>
<select id="kategori-filter">
<option value="Alla">Alla</option>
</select>
<div id="org-list"></div>
</div>


<div id="map"></div>


<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>
const organizations = [
{kategori:"Näringsliv", namn:"Samling Näringsliv", lat:63.17917, lon:14.63583, region:"Jämtland", färg:"red", säte:"Östersund"},
{kategori:"Näringsliv", namn:"IUC Jämtland Härjedalen", lat:63.17917, lon:14.63583, region:"Jämtland", färg:"red", säte:"Östersund"},
{kategori:"Näringsliv", namn:"Handelskammaren Mitt", lat:63.17917, lon:14.63583, region:"Jämtland", färg:"red", säte:"Östersund"},
{kategori:"Näringsliv", namn:"Företagarna", lat:63.17917, lon:14.63583, region:"Jämtland", färg:"red", säte:"Östersund"},
{kategori:"Näringsliv", namn:"Jämtland Härjedalen Turism (JHT)", lat:63.17917, lon:14.63583, region:"Jämtland", färg:"red", säte:"Östersund"},
{kategori:"Näringsliv", namn:"Svenskt Näringsliv Jämtland", lat:63.17917, lon:14.63583, region:"Jämtland", färg:"red", säte:"Östersund"},
{kategori:"Näringsliv", namn:"Nyföretagarcentrum", lat:63.17917, lon:14.63583, region:"Jämtland", färg:"red", säte:"Östersund"},
{kategori:"Näringsliv", namn:"Lantbrukarnas riksorganisation (LRF)", lat:63.17917, lon:14.63583, region:"Jämtland", färg:"red", säte:"Östersund"},
{kategori:"Näringsliv", namn:"Peak Inkubator", lat:63.17917, lon:14.63583, region:"Jämtland", färg:"red", säte:"Östersund"},
{kategori:"Näringsliv", namn:"NHO Næringslivets Hovedorganisasjon", lat:63.44683, lon:10.42191, region:"Trøndelag", färg:"red", säte:"Trondheim"},
{kategori:"Näringsliv", namn:"Næringsforeningen i Trondheimsregionen (NiT)", lat:63.44683, lon:10.42191, region:"Trøndelag", färg:"red", säte:"Trondheim"},
{kategori:"Näringsliv", namn:"Innherred Næringsforening", lat:64.01519, lon:11.49526, region:"Trøndelag", färg:"red", säte:"Steinkjer"},
{kategori:"Näringsliv", namn:"Rørosregionen Næringshage", lat:62.5747, lon:11.3842, region:"Trøndelag", färg:"red", säte:"Røros"},
// Fortsätt med alla resterande organisationer på samma format
];


// Skapa karta
const map = L.map('map').setView([63.17917, 14.63583], 6);
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {maxZoom:19}).addTo(map);


const markers = [];
organizations.forEach(org => {
const marker = L.circleMarker([org.lat, org.lon], {
color: org.färg,
radius: 8,
fillOpacity: 0.7
}).bindPopup(`<b>${org.namn}</b><br>${org.kategori}<br>${org.region}, ${org.säte}`);
markers.push({org, marker});
});


// Fyll dropdown med unika kategorier
const kategoriFilter = document.getElementById('kategori-filter');
const kategorier = [...new Set(organizations.map(o => o.kategori))];
kategorier.forEach(k => {
const option = document.createElement('option');
option.value = k;
option.innerText = k;
kategoriFilter.appendChild(option);
});


// Funktion för att uppdatera lista och markörer
function updateView() {
const selected = kategoriFilter.value;
const listContainer = document.getElementById('org-list');
listContainer.innerHTML = '';


markers.forEach(({org, marker}) => {
const show = selected === 'Alla' || org.kategori === selected;
if(show) {
marker.addTo(map);
const el = document.createElement('div');
el.className = 'org-item';
el.innerText = org.namn;
el.onclick = () => { map.setView([org.lat, org.lon], 10); marker.openPopup(); };
listContainer.appendChild(el);
} else {
map.removeLayer(marker);
}
});
}


// Initiera vy
updateView();
kategoriFilter.addEventListener('change', updateView);
